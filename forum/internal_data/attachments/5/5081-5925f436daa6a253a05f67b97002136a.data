MoonSerials v. 1.4.3 от 06.02.2016

Установка:
1. Создать дополнительные поля, для работы модуля их надо 4, кроме поля с ИД кинопоиска: 
- Статус сериала - для того, чтобы не проверять каждый сериал, в тех, которые уже закончены, ставится значение "Закончен" - у меня стоит поле типа список, там два варианта - Закончен и Снимается.
- Перевод - в это поле модуль будет записывать название студии, которая озвучила сериал
- Сезон - сюда модуль будет писать номер сезона
- Серия - сюда модуль будет писать номер серии

2. Закинуть все из папки upload на сервер, выбрав свою кодировку

3. Отредактировать под себя файлы шаблона модуля
- moonserials_iframe.tpl - основной шаблон модуля, используется для вывода плееров, теги в шаблоне с подробными комментариями
- moonserials_iframe_title.tpl - шаблон вывода заголовков табов
- moonserials_iframe_content.tpl - шаблон вывода контента табов
- moonserials_block.tpl - основной шаблон блока вывода обновлений сериалов
- moonserials_block_content.tpl - шаблон вывода собственно сериалов в блоке, поддерживаются все ваши дополнительные поля

4. На файл engine/data/moonserials_options.php выставить права 666

5. Зайти в админку модуля и настроить его под себя

6. В шаблоне полной новости прописать:
{include file="/engine/modules/moonserials.php"} - для вывода модуля

В шаблоне main.tpl
{include file="/engine/modules/moonserials_block.php"} - для вывода блока обновлений

7. Для оформления вкладок и блока добавить в любой css файл:

/* moonserials */
.tabsms_title{background:#333333;width:100%;border:4px solid #000000;font-size: 11px;color:#7B7B7B;text-align:center; margin-bottom: -4px }
.tabsms{display:inline-block;background:#000000;width:100%;}
.tabsms > div{padding-top:0px;}
.tabsms ul{margin:0px;padding:2px;}
.tabsms ul:after{content:"";display:block;clear:both;height:5px;background:#000000;}
.tabsms ul li{margin:0px;width:25%;cursor:pointer;display:block;float:left;padding:2px;background:#333333;color:#7B7B7B;text-align:center;
border:2px solid #000000;font-size: 11px}
.tabsms ul li.active, .tabs ul li.active:hover{background:#707070;color:#fff;}
.tabsms ul li:hover{background:#707070;color:#fff;}

.msupdate_block{margin-bottom: 15px;}
.msupdate_block_date{background-color: #6f6f6f; color: #fff; font-size: 14px; font-weight: bold; padding: 7px 20px;}
.msupdate_block_list .a-m-d{display: block; position: relative;}
.msupdate_block_list .a-m-d:after{-webkit-transition: background-color 0.2s linear; -moz-transition: background-color 0.2s linear; -ms-transition: background-color 0.2s linear; -o-transition: background-color 0.2s linear; transition: background-color 0.2s linear; background-color: rgba(0, 0, 0, 0); content: ""; height: 100%; position: absolute; top: 0; left: 0; width: 100%;}
.msupdate_block_list .a-m-d:hover:after{background-color: rgba(0, 0, 0, 0.2);}
.msupdate_block_list_item{-webkit-transition: background-color 0.2s linear; -moz-transition: background-color 0.2s linear; -ms-transition: background-color 0.2s linear; -o-transition: background-color 0.2s linear; transition: background-color 0.2s linear; background-color: #fff; border-bottom: 1px solid #ccc; cursor: pointer; display: table; min-height: 35px; width: 100%;}
.msupdate_block_list_item:hover{background-color: #fafafa;}
.msupdate_block_list_item:hover .b-seriesupdate__block_list_link{color: #2e859e; text-decoration: none;}
.msupdate_block_list_item.tracked{background-color: #d6f0ff;}
.msupdate_block_list_item.tracked:hover{background-color: #a8dfff;}
.msupdate_block_list_item.tracked:hover .b-seriesupdate__block_list_link{color: #000;}
.msupdate_block_list_item_inner{display: table-row;}
.msupdate_block_list_item_inner .cell{padding: 6px 0 5px; display: table-cell; vertical-align: middle;}
.msupdate_block_list_item_inner .cell-1{color: #000; font-size: 12px; padding-right: 5px; padding-left: 10px;}
.msupdate_block_list_item_inner .cell-1 .season{white-space: nowrap;}
.msupdate_block_list_item_inner .cell-2{color: #000; font-size: 11px; font-weight: bold; padding-right: 10px; text-align: right; white-space: nowrap;}
.msupdate_block_list_item_inner .cell-2 i{color: #777; display: block; font-style: normal;}
.msupdate_block_list_link{-webkit-transition: color 0.2s ease-in-out; -moz-transition: color 0.2s ease-in-out; -ms-transition: color 0.2s ease-in-out; -o-transition: color 0.2s ease-in-out; transition: color 0.2s ease-in-out; color: #000; font-weight: bold; text-decoration: none;}
.msupdate_block_list_link:hover{text-decoration: none;}
.msupdate_block_list_link:visited{color: #000;}
/* moonserials */

8. Для работы вкладок добавить в любой js файл:

// moonserials
(function($){
    jQuery.fn.lightTabs = function(options){

        var createTabs = function(){
            tabsms = this;
            i = 0;

            showPage = function(i){
                $(tabsms).children("div").children("div").hide();
                $(tabsms).children("div").children("div").eq(i).show();
                $(tabsms).children("ul").children("li").removeClass("active");
                $(tabsms).children("ul").children("li").eq(i).addClass("active");
            }

            showPage(0);

            $(tabsms).children("ul").children("li").each(function(index, element){
                $(element).attr("data-page", i);
                i++;
            });

            $(tabsms).children("ul").children("li").click(function(){
                showPage(parseInt($(this).attr("data-page")));
            });
        };
        return this.each(createTabs);
    };
})(jQuery);
$(document).ready(function(){
    $(".tabsms").lightTabs();
});
// moonserials


Важно!!!
Строку модуля в шаблоне надо выводить только для сериалов, то есть заключить ее в тег [catlist=1] строка [/catlist], где 1 это ид категории с сериалами
Строку модуля не надо заключать в теги [xfnotgiven_X] [/xfnotgiven_X], где Х название полей статус сериала, сезон или серия, ведь тогда модуль не сможет сработать, пока поля не наполнены, а поля не будут заполнены, потому что модуль не может сработать
При заполнении полей в админке смотрите внимательно, чтобы в начале или конце данных не было пробелов

